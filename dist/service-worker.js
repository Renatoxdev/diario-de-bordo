const CACHE_NAME="diario-de-bordo-cache-v1",APP_SHELL=["./","./index.html","./style.css","./script.js","./manifest.json","./icons/icon-192.png","./icons/icon-512.png"];self.addEventListener("install",t=>{t.waitUntil(caches.open(CACHE_NAME).then(e=>e.addAll(APP_SHELL)).then(()=>self.skipWaiting()))}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(e=>e.filter(n=>n!==CACHE_NAME)).then(e=>Promise.all(e.map(n=>caches.delete(n)))).then(()=>self.clients.claim()))});function isNavigationRequest(t){return t.mode==="navigate"}self.addEventListener("fetch",t=>{const{request:e}=t;if(e.method==="GET"){if(isNavigationRequest(e)){t.respondWith(fetch(e).then(n=>{const c=n.clone();return caches.open(CACHE_NAME).then(i=>i.put("./index.html",c)),n}).catch(()=>caches.match("./index.html")));return}t.respondWith(caches.match(e).then(n=>n||fetch(e).then(c=>{const i=c.clone();return caches.open(CACHE_NAME).then(s=>s.put(e,i)),c}).catch(()=>caches.match("./"))))}});
